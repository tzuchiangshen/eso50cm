#summary Procedure to identify if a system is BE or LE

= Introduction =


= ARM =
{{{
root@ts7000:/usr/include/c++/4.3# cat /etc/issue
Debian GNU/Linux 5.0 \n \l    (lenny)

root@ts7000:/usr/include/c++/4.3# uname -a
Linux ts7000 2.6.21-ts #4 PREEMPT Wed Jan 27 17:12:25 MST 2010 armv4tl unknown

root@ts7000:/usr/include/c++/4.3# gcc -v
Using built-in specs.
Target: arm-linux-gnueabi
Configured with: ../src/configure -v --with-pkgversion='Debian 4.3.2-1.1' --with-bugurl=file:///usr/share/doc/gcc-4.3/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --enable-shared --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.3 --program-suffix=-4.3 --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-mpfr --disable-libssp --disable-sjlj-exceptions --enable-checking=release --build=arm-linux-gnueabi --host=arm-linux-gnueabi --target=arm-linux-gnueabi
Thread model: posix
gcc version 4.3.2 (Debian 4.3.2-1.1) 


}}}



/mnt/root/root/CURRENTLY_MOD/trunk/ESO50CM/tcs/test # file testEndian
{{{
testEndian: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.14, not stripped
}}}
/mnt/root/root/CURRENTLY_MOD/trunk/ESO50CM/tcs/test # readelf  -h testEndian
{{{
ELF Header:
  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF32
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              EXEC (Executable file)
  Machine:                           ARM
  Version:                           0x1
  Entry point address:               0x83a8
  Start of program headers:          52 (bytes into file)
  Start of section headers:          4124 (bytes into file)
  Flags:                             0x4000002, has entry point, Version4 EABI
  Size of this header:               52 (bytes)
  Size of program headers:           32 (bytes)
  Number of program headers:         8
  Size of section headers:           40 (bytes)
  Number of section headers:         37
  Section header string table index: 34
}}}


{{{
/mnt/root/tmp/fp-testsuite # ./vanilla
float      : 0.002877000020816922187805175781 | 0.002877000020816922187805175781 | 0.002877000020816922187805175781
double     : 0.002876999999999999783201198866 | 0.002876999999999999783201198866 | 0.002876999999999999783201198866
long double: 0.002876999999999999783201198866 | 0.002876999999999999783201198866 | 0.002876999999999999783201198866

}}}


{{{
/mnt/root/root/CURRENTLY_MOD/trunk/ESO50CM/tcs/test # ./testEndian
double represtation size = 8
 bytes9006104071832581.00
s[0] = 0x5
s[1] = 0x4
s[2] = 0x3
s[3] = 0x2
s[4] = 0x1
s[5] = 0xFF
s[6] = 0x3F
s[7] = 0x43


-9006104071832581.00
s[0] = 0x5
s[1] = 0x4
s[2] = 0x3
s[3] = 0x2
s[4] = 0x1
s[5] = 0xFF
s[6] = 0x3F
s[7] = 0xC3


1.00
s[0] = 0x0
s[1] = 0x0
s[2] = 0x0
s[3] = 0x0
s[4] = 0x0
s[5] = 0x0
s[6] = 0xF0
s[7] = 0x3F


-1.00
s[0] = 0x0
s[1] = 0x0
s[2] = 0x0
s[3] = 0x0
s[4] = 0x0
s[5] = 0x0
s[6] = 0xF0
s[7] = 0xBF

}}}
== i386 ==
{{{ 
ubuntu@ubuntu:~/CURRENTLY_MOD$ cat /etc/issue
Ubuntu 11.04 \n \l

ubuntu@ubuntu:~/CURRENTLY_MOD$ uname -a
Linux ubuntu 2.6.38-8-generic #42-Ubuntu SMP Mon Apr 11 03:31:50 UTC 2011 i686 i686 i386 GNU/Linux

ubuntu@ubuntu:~/CURRENTLY_MOD/trunk/ESO50CM/tcs/test$ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/lto-wrapper
Target: i686-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.5.2-8ubuntu4' --with-bugurl=file:///usr/share/doc/gcc-4.5/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.5 --enable-shared --enable-multiarch --with-multiarch-defaults=i386-linux-gnu --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib/i386-linux-gnu --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.5 --libdir=/usr/lib/i386-linux-gnu --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-plugin --enable-gold --enable-ld=default --with-plugin-ld=ld.gold --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu --target=i686-linux-gnu
Thread model: posix
gcc version 4.5.2 (Ubuntu/Linaro 4.5.2-8ubuntu4) 


}}}

{{{ 
ubuntu@ubuntu:~/CURRENTLY_MOD$ file testEndian
testEndian: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.15, not stripped

ubuntu@ubuntu:~/CURRENTLY_MOD$ readelf -h testEndian
ELF Header:
  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF32
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              EXEC (Executable file)
  Machine:                           Intel 80386
  Version:                           0x1
  Entry point address:               0x8048360
  Start of program headers:          52 (bytes into file)
  Start of section headers:          4456 (bytes into file)
  Flags:                             0x0
  Size of this header:               52 (bytes)
  Size of program headers:           32 (bytes)
  Number of program headers:         9
  Size of section headers:           40 (bytes)
  Number of section headers:         30
  Section header string table index: 27



}}}

{{{
ubuntu@ubuntu:~/CURRENTLY_MOD/fp-testsuite$ ./vanilla 
float      : 0.002877000020816922187805175781 | 0.002877000000000000216882067861 | 0.002877000020816922187805175781
double     : 0.002876999999999999783201198866 | 0.002877000000000000216882067861 | 0.002877000000000000216882067861
long double: 0.002877000000000000000041633363 | 0.002877000000000000000041633363 | 0.002877000000000000000041633363

}}}

{{{
ubuntu@ubuntu:~/CURRENTLY_MOD/trunk/ESO50CM/tcs/test$ ./testEndian 
double represtation size = 8
 bytes9006104071832581.00
s[0] = 0x5
s[1] = 0x4
s[2] = 0x3
s[3] = 0x2
s[4] = 0x1
s[5] = 0xFFFFFFFF
s[6] = 0x3F
s[7] = 0x43


-9006104071832581.00
s[0] = 0x5
s[1] = 0x4
s[2] = 0x3
s[3] = 0x2
s[4] = 0x1
s[5] = 0xFFFFFFFF
s[6] = 0x3F
s[7] = 0xFFFFFFC3


1.00
s[0] = 0x0
s[1] = 0x0
s[2] = 0x0
s[3] = 0x0
s[4] = 0x0
s[5] = 0x0
s[6] = 0xFFFFFFF0
s[7] = 0x3F


-1.00
s[0] = 0x0
s[1] = 0x0
s[2] = 0x0
s[3] = 0x0
s[4] = 0x0
s[5] = 0x0
s[6] = 0xFFFFFFF0
s[7] = 0xFFFFFFBF
}}}

= ARM Middle Endian = 
ARM use middle endian format for datatype bigger than 32 bits, such as double. This means when the data structure is transmit outside of the ARM needs to be swapped before. 

For example: a double can be expressed as ABCD EFGH (8 bytes) in ARM. When this data structure is sent to an i386 platform, the data structure needs to be swapped before to be cast to a double. i.e: EFGH ABCD 

= References =
  * http://babbage.cs.qc.edu/IEEE-754/Decimal.html IEEE-754 calculator
  * http://www.heyrick.co.uk/assembler/fpops.html
  * http://wiki.debian.org/ArmEabiPort#GCC_view
  * http://www.makelinux.net/ldd3/